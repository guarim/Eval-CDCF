<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCM Technologie : Analyse Fonctionnelle & Cha√Æne d'√ânergie</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --bg-color: #f4f7f6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1, h2 {
            text-align: center;
            color: var(--secondary-color);
        }

        /* Formulaire de connexion */
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }

        input[type="text"] {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }

        /* Section Question */
        .question-container {
            display: none; /* Masqu√© par d√©faut */
        }

        .question-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: #e9ecef;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
            font-weight: bold;
            font-size: 1.2em;
            text-align: center;
        }
        
        /* Pour simuler l'image si pas de fichier local */
        .img-placeholder {
            width: 100%;
            height: 200px;
            background: #dfe6e9;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            margin-bottom: 15px;
            border: 2px dashed #b2bec3;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-label {
            display: block;
            padding: 10px 15px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover {
            background-color: #e3f2fd;
            border-color: var(--primary-color);
        }

        input[type="radio"] {
            margin-right: 10px;
        }

        .progress-bar {
            width: 100%;
            background-color: #eee;
            border-radius: 5px;
            margin-bottom: 20px;
            height: 10px;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success-color);
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s;
        }

        /* R√©sultats */
        .results-container {
            display: none;
        }

        .score-card {
            text-align: center;
            background: var(--secondary-color);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .score-big {
            font-size: 3em;
            font-weight: bold;
        }

        .review-item {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            border-left: 5px solid transparent;
        }

        .review-item.correct {
            border-left-color: var(--success-color);
            background-color: #f0fff4;
        }

        .review-item.incorrect {
            border-left-color: var(--error-color);
            background-color: #fff5f5;
        }

        .explanation {
            font-style: italic;
            color: #666;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- 1. √âcran de Connexion -->
    <div id="login-screen">
        <h1>QCM Technologie</h1>
        <p style="text-align: center;">Th√®mes : B√™te √† corne, Fonctions, Cha√Æne d'√©nergie, CDCF</p>
        <div class="login-form">
            <label>Nom : <input type="text" id="nom" required></label>
            <label>Pr√©nom : <input type="text" id="prenom" required></label>
            <label>Classe : <input type="text" id="classe" placeholder="ex: 3√®me B" required></label>
            <button onclick="startQuiz()">Commencer le test</button>
        </div>
    </div>

    <!-- 2. √âcran du Quiz -->
    <div id="quiz-screen" class="question-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>
        <h2 id="question-number">Question 1/20</h2>
        
        <!-- Placeholder pour l'image -->
        <div id="q-image" class="question-image">
            <img src="" alt="Image de la question" style="max-width:100%; max-height:100%; display:none;" id="real-img">
            <span id="img-text">Image illustrative</span>
        </div>

        <h3 id="question-text">Intitul√© de la question...</h3>
        
        <div class="options" id="options-container">
            <!-- Les options seront ins√©r√©es ici par JS -->
        </div>

        <div style="margin-top: 20px; text-align: right;">
            <button onclick="nextQuestion()" id="next-btn">Suivant</button>
        </div>
    </div>

    <!-- 3. √âcran des R√©sultats -->
    <div id="result-screen" class="results-container">
        <h1>R√©sultats du test</h1>
        <div class="score-card">
            <p>√âl√®ve : <span id="student-name"></span></p>
            <p>Note obtenue</p>
            <div class="score-big"><span id="score-val">0</span>/20</div>
        </div>

        <h3>Correction d√©taill√©e :</h3>
        <div id="correction-list">
            <!-- La liste des corrections sera g√©n√©r√©e ici -->
        </div>
        
        <div style="text-align: center; margin-top:20px;">
            <button onclick="location.reload()">Recommencer</button>
        </div>
    </div>
</div>

<script>
    // --- DONN√âES DU QCM ---
    // Note: Les images utilisent un service de placeholder avec du texte pour que vous voyiez le contexte.
    const questions = [
        // TH√àME : B√äTE √Ä CORNE & CDCF
        {
            text: "Dans le diagramme 'B√™te √† corne', que repr√©sente la bulle de gauche ?",
            imageText: "Sch√©ma B√™te √† corne : Bulle gauche ?",
            options: ["Sur quoi agit-il ?", "A qui rend-il service ?", "Dans quel but ?", "Le produit"],
            correct: 1,
            explanation: "La bulle de gauche correspond √† la cible ou l'utilisateur : 'A qui le produit rend-il service ?'."
        },
        {
            text: "Quelle question pose-t-on pour remplir la bulle du bas dans la B√™te √† corne ?",
            imageText: "Sch√©ma B√™te √† corne : Bulle du bas ?",
            options: ["D'o√π vient l'√©nergie ?", "Dans quel but ?", "Combien √ßa co√ªte ?", "Sur quoi agit-il ?"],
            correct: 1,
            explanation: "La partie basse d√©finit la fonction globale : 'Dans quel but le produit existe-t-il ?'."
        },
        {
            text: "Comment appelle-t-on l'outil graphique qui permet d'exprimer le besoin ?",
            imageText: "Outil graphique en forme de t√™te",
            options: ["Le diagramme FAST", "La b√™te √† corne (APTE)", "L'organigramme", "Le sch√©ma cin√©matique"],
            correct: 1,
            explanation: "La b√™te √† corne est l'outil sp√©cifique pour la m√©thode APTE d'expression du besoin."
        },
        {
            text: "Que signifie le sigle C.D.C.F ?",
            imageText: "Document officiel : C.D.C.F",
            options: ["Cahier De Commande Final", "Cahier Des Charges Fonctionnel", "Centre De Cr√©ation Fran√ßais", "Code Des Charges Fabriqu√©es"],
            correct: 1,
            explanation: "Cahier Des Charges Fonctionnel : document contractuel fixant les besoins et contraintes."
        },
        {
            text: "Dans la B√™te √† corne, que place-t-on au centre du diagramme ?",
            imageText: "Sch√©ma B√™te √† corne : Centre ?",
            options: ["L'utilisateur", "La mati√®re d'≈ìuvre", "Le nom du produit", "Le prix"],
            correct: 2,
            explanation: "Le centre du graphique d√©signe l'objet technique ou le syst√®me √©tudi√©."
        },

        // TH√àME : FONCTIONS (TECHNIQUES, SERVICE, CONTRAINTES)
        {
            text: "Une fonction qui d√©crit l'action du produit pour r√©pondre au besoin de l'utilisateur est une :",
            imageText: "FP vs FC",
            options: ["Fonction Contrainte (FC)", "Fonction Principale (FP)", "Fonction Technique (FT)", "Fonction d'Estime"],
            correct: 1,
            explanation: "La Fonction Principale (FP) justifie la cr√©ation du produit (la raison pour laquelle on l'ach√®te)."
        },
        {
            text: "Une fonction impos√©e par l'environnement (normes, s√©curit√©, √©nergie) est une :",
            imageText: "Environnement ext√©rieur -> Produit",
            options: ["Fonction Principale", "Fonction Contrainte", "Fonction Secondaire", "Fonction d'Usage"],
            correct: 1,
            explanation: "Une Fonction Contrainte (FC) limite la libert√© du concepteur (ex: doit √™tre √©tanche, doit fonctionner sur batterie)."
        },
        {
            text: "Quel diagramme permet de d√©composer les fonctions de service en fonctions techniques ?",
            imageText: "Arborescence de fonctions : Quand / Pourquoi / Comment",
            options: ["Le diagramme FAST", "Le diagramme Pieuvre", "L'histogramme", "Le diagramme de Gantt"],
            correct: 0,
            explanation: "Le diagramme FAST (Function Analysis System Technique) d√©compose le 'Comment' r√©aliser une fonction."
        },
        {
            text: "Dans un cahier des charges, chaque fonction est d√©finie par :",
            imageText: "Tableau : Fonction | Crit√®re | Niveau",
            options: ["Un prix et une couleur", "Un crit√®re et un niveau", "Un dessin et une photo", "Une marque et un slogan"],
            correct: 1,
            explanation: "Exemple : Pour la fonction '√ätre autonome', le Crit√®re est 'Temps' et le Niveau est '2 heures'."
        },
        {
            text: "Quelle est la d√©finition d'une fonction technique ?",
            imageText: "Solution technique interne",
            options: ["La relation avec l'utilisateur", "L'aspect visuel du produit", "Une solution interne pour r√©aliser une fonction de service", "Le prix de vente"],
            correct: 2,
            explanation: "Les fonctions techniques sont les solutions constructives (internes) choisies par l'ing√©nieur."
        },

        // TH√àME : CHA√éNE D'√âNERGIE
        {
            text: "Dans quel ordre trouve-t-on g√©n√©ralement les blocs de la cha√Æne d'√©nergie ?",
            imageText: "Ordre des blocs : A -> D -> C -> T",
            options: [
                "Transmettre -> Convertir -> Distribuer -> Alimenter",
                "Alimenter -> Distribuer -> Convertir -> Transmettre",
                "Convertir -> Alimenter -> Transmettre -> Distribuer",
                "Distribuer -> Alimenter -> Convertir -> Transmettre"
            ],
            correct: 1,
            explanation: "L'ordre logique est : Alimenter (Source) -> Distribuer (Commande) -> Convertir (Transformation) -> Transmettre (Action)."
        },
        {
            text: "Quelle est la fonction d'une pile ou d'une batterie ?",
            imageText: "Image d'une batterie",
            options: ["Convertir", "Transmettre", "Alimenter / Stocker", "Distribuer"],
            correct: 2,
            explanation: "La batterie stocke l'√©nergie et ALIMENTE le syst√®me en √©lectricit√©."
        },
        {
            text: "Quel composant assure g√©n√©ralement la fonction 'Distribuer' ?",
            imageText: "Image : Interrupteur / Relais",
            options: ["Un moteur", "Un engrenage", "Un interrupteur ou un relais", "Une roue"],
            correct: 2,
            explanation: "La fonction Distribuer contr√¥le le flux d'√©nergie (Ouvrir/Fermer le circuit), comme un interrupteur."
        },
        {
            text: "Quel est le r√¥le d'un moteur √©lectrique dans la cha√Æne d'√©nergie ?",
            imageText: "Image d'un moteur √©lectrique",
            options: ["Alimenter", "Convertir", "Transmettre", "Acqu√©rir"],
            correct: 1,
            explanation: "Le moteur CONVERTIT l'√©nergie √©lectrique en √©nergie m√©canique (mouvement)."
        },
        {
            text: "Les engrenages, courroies ou chaines servent principalement √† :",
            imageText: "Image d'engrenages",
            options: ["Transmettre", "Convertir", "Distribuer", "Alimenter"],
            correct: 0,
            explanation: "Ils TRANSMETTENT le mouvement (l'√©nergie m√©canique) jusqu'√† l'effecteur final (roue, h√©lice...)."
        },

        // TH√àME : M√âLANGE / EXEMPLES CONCRETS
        {
            text: "Dans un v√©lo √©lectrique, la batterie appartient √† :",
            imageText: "V√©lo √©lectrique",
            options: ["La cha√Æne d'information", "La cha√Æne d'√©nergie", "La structure porteuse", "L'esth√©tique"],
            correct: 1,
            explanation: "La batterie fournit l'√©nergie n√©cessaire au mouvement, elle fait partie de la cha√Æne d'√©nergie."
        },
        {
            text: "Sur une B√™te √† corne d'un lampadaire, 'Sur quoi agit-il ?' correspond √† :",
            imageText: "Lampadaire √©clairant la rue",
            options: ["L'≈ìil de l'utilisateur", "La zone √† √©clairer", "L'ampoule", "L'√©lectricit√©"],
            correct: 1,
            explanation: "Le lampadaire agit sur l'environnement obscur, donc la zone √† √©clairer."
        },
        {
            text: "Dans la cha√Æne d'information, quel √©l√©ment 'Acquiert' l'information ?",
            imageText: "Capteur de pr√©sence",
            options: ["Le capteur", "Le microcontr√¥leur", "La LED", "Le fil √©lectrique"],
            correct: 0,
            explanation: "Les capteurs (temp√©rature, pr√©sence, lumi√®re) assurent la fonction ACQU√âRIR."
        },
        {
            text: "Que repr√©sente le 'Flux d'√©nergie' sur un sch√©ma ?",
            imageText: "Fl√®ches pleines vs pointill√©s",
            options: ["Le passage des informations logiques", "La circulation de la puissance pour r√©aliser l'action", "Le d√©placement de l'utilisateur", "Le recyclage du produit"],
            correct: 1,
            explanation: "Le flux d'√©nergie concerne la puissance (√©lectricit√©, mouvement) n√©cessaire pour agir sur la mati√®re d'≈ìuvre."
        },
        {
            text: "Pour valider un besoin (B√™te √† corne), que doit-on v√©rifier ?",
            imageText: "Validation du besoin",
            options: ["Que le produit est joli", "Que le besoin ne va pas dispara√Ætre prochainement", "Que le produit est cher", "Que le produit est d√©j√† fabriqu√©"],
            correct: 1,
            explanation: "On valide le besoin en s'assurant qu'il est durable et que le produit apporte une r√©elle plus-value."
        }
    ];

    // --- LOGIQUE JAVASCRIPT ---

    let currentQuestionIndex = 0;
    let userAnswers = []; // Stocke les r√©ponses de l'√©l√®ve
    let studentInfo = {};

    function startQuiz() {
        const nom = document.getElementById('nom').value.trim();
        const prenom = document.getElementById('prenom').value.trim();
        const classe = document.getElementById('classe').value.trim();

        if (!nom || !prenom || !classe) {
            alert("Merci de remplir tous les champs (Nom, Pr√©nom, Classe) !");
            return;
        }

        studentInfo = { nom, prenom, classe };
        
        // Cacher login, montrer quiz
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'block';

        loadQuestion();
    }

    function loadQuestion() {
        const q = questions[currentQuestionIndex];
        
        // Mise √† jour de la barre de progression
        const progressPercent = ((currentQuestionIndex) / questions.length) * 100;
        document.getElementById('progress').style.width = progressPercent + "%";

        // Mise √† jour textes
        document.getElementById('question-number').textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;
        document.getElementById('question-text').textContent = q.text;

        // Mise √† jour image (Placeholder avec texte dynamique)
        const imgUrl = `https://placehold.co/600x200/png?text=${encodeURIComponent(q.imageText)}&font=roboto`;
        document.getElementById('real-img').src = imgUrl;
        document.getElementById('real-img').style.display = 'block';
        document.getElementById('img-text').style.display = 'none';

        // G√©n√©ration des options
        const optionsContainer = document.getElementById('options-container');
        optionsContainer.innerHTML = ''; // Vider les anciennes

        q.options.forEach((opt, index) => {
            const label = document.createElement('label');
            label.className = 'option-label';
            
            const radio = document.createElement('input');
            radio.type = 'radio';
            radio.name = 'q_option';
            radio.value = index;
            
            label.appendChild(radio);
            label.appendChild(document.createTextNode(opt));
            optionsContainer.appendChild(label);
        });

        // Gestion du bouton (Derni√®re question -> Terminer)
        const btn = document.getElementById('next-btn');
        if (currentQuestionIndex === questions.length - 1) {
            btn.textContent = "Terminer et voir les r√©sultats";
        } else {
            btn.textContent = "Suivant";
        }
    }

    function nextQuestion() {
        // V√©rifier si une r√©ponse est coch√©e
        const selected = document.querySelector('input[name="q_option"]:checked');
        if (!selected) {
            alert("Veuillez s√©lectionner une r√©ponse.");
            return;
        }

        // Sauvegarder la r√©ponse
        userAnswers.push(parseInt(selected.value));

        // Passer √† la suivante ou finir
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            loadQuestion();
        } else {
            finishQuiz();
        }
    }

    function finishQuiz() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        
        let score = 0;
        const correctionContainer = document.getElementById('correction-list');
        correctionContainer.innerHTML = '';

        // Afficher Nom/Pr√©nom
        document.getElementById('student-name').textContent = `${studentInfo.nom.toUpperCase()} ${studentInfo.prenom} (${studentInfo.classe})`;

        // Boucle de correction
        questions.forEach((q, index) => {
            const userRep = userAnswers[index];
            const isCorrect = (userRep === q.correct);
            
            if (isCorrect) score++;

            // Cr√©ation de l'√©l√©ment de r√©vision
            const item = document.createElement('div');
            item.className = `review-item ${isCorrect ? 'correct' : 'incorrect'}`;

            let html = `<strong>Question ${index + 1}:</strong> ${q.text}<br>`;
            
            if (isCorrect) {
                html += `<span style="color:var(--success-color)">‚úî Bonne r√©ponse : ${q.options[q.correct]}</span>`;
            } else {
                html += `<span style="color:var(--error-color)">‚úò Votre r√©ponse : ${q.options[userRep]}</span><br>`;
                html += `<span style="color:var(--success-color)">‚ûú La bonne r√©ponse √©tait : ${q.options[q.correct]}</span>`;
            }

            html += `<div class="explanation">üí° Explication : ${q.explanation}</div>`;
            
            item.innerHTML = html;
            correctionContainer.appendChild(item);
        });

        // Affichage de la note
        document.getElementById('score-val').textContent = score;
    }
</script>

</body>
</html>
